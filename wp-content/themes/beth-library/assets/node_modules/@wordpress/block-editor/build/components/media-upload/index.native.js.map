{"version":3,"names":["_element","require","_reactNative","_reactNativePromptAndroid","_interopRequireDefault","_i18n","_components","_reactNativeBridge","_icons","_blockEditor","_compose","_data","MEDIA_TYPE_IMAGE","exports","MEDIA_TYPE_VIDEO","MEDIA_TYPE_AUDIO","MEDIA_TYPE_ANY","OPTION_TAKE_VIDEO","__","OPTION_TAKE_PHOTO","OPTION_TAKE_PHOTO_OR_VIDEO","OPTION_INSERT_FROM_URL","OPTION_WORDPRESS_MEDIA_LIBRARY","URL_MEDIA_SOURCE","PICKER_OPENING_DELAY","MediaUpload","Component","pickerTimeout","constructor","props","onPickerPresent","bind","onPickerSelect","getAllSources","state","otherMediaOptions","componentDidMount","allowedTypes","autoOpen","getOtherMediaOptions","otherMediaOptionsWithIcons","map","option","requiresModal","types","id","value","setState","componentWillUnmount","clearTimeout","onSelectURL","cameraImageSource","mediaSources","deviceCamera","label","icon","capturePhoto","cameraVideoSource","captureVideo","deviceLibrarySource","deviceLibrary","image","siteLibrarySource","siteMediaLibrary","wordpress","mediaLibrary","urlSource","globe","internalSources","concat","getMediaOptionsItems","__experimentalOnlyMediaLibrary","isAudioBlockMediaUploadEnabled","filter","source","every","allowedType","includes","some","getChooseFromDeviceIcon","mobile","isIOS","Platform","OS","picker","setTimeout","presentPicker","onSelect","multiple","prompt","undefined","text","style","onPress","mediaSource","shift","type","requestMediaPicker","media","render","isReplacingMedia","isOneType","length","isImage","isVideo","isAudio","isAnyType","isImageOrVideo","pickerTitle","getMediaOptions","createElement","Picker","title","hideCancelButton","ref","instance","options","onChange","testID","open","_default","compose","withSelect","select","capabilities","blockEditorStore","getSettings","default"],"sources":["@wordpress/block-editor/src/components/media-upload/index.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { Platform } from 'react-native';\n\nimport prompt from 'react-native-prompt-android';\n\n/**\n * WordPress dependencies\n */\nimport { Component, React } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Picker } from '@wordpress/components';\nimport {\n\tgetOtherMediaOptions,\n\trequestMediaPicker,\n\tmediaSources,\n} from '@wordpress/react-native-bridge';\nimport {\n\tcapturePhoto,\n\tcaptureVideo,\n\timage,\n\twordpress,\n\tmobile,\n\tglobe,\n} from '@wordpress/icons';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\n\nexport const MEDIA_TYPE_IMAGE = 'image';\nexport const MEDIA_TYPE_VIDEO = 'video';\nexport const MEDIA_TYPE_AUDIO = 'audio';\nexport const MEDIA_TYPE_ANY = 'any';\n\nexport const OPTION_TAKE_VIDEO = __( 'Take a Video' );\nexport const OPTION_TAKE_PHOTO = __( 'Take a Photo' );\nexport const OPTION_TAKE_PHOTO_OR_VIDEO = __( 'Take a Photo or Video' );\nexport const OPTION_INSERT_FROM_URL = __( 'Insert from URL' );\nexport const OPTION_WORDPRESS_MEDIA_LIBRARY = __( 'WordPress Media Library' );\n\nconst URL_MEDIA_SOURCE = 'URL';\n\nconst PICKER_OPENING_DELAY = 200;\n\nexport class MediaUpload extends Component {\n\tpickerTimeout;\n\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.onPickerPresent = this.onPickerPresent.bind( this );\n\t\tthis.onPickerSelect = this.onPickerSelect.bind( this );\n\t\tthis.getAllSources = this.getAllSources.bind( this );\n\t\tthis.state = {\n\t\t\totherMediaOptions: [],\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { allowedTypes = [], autoOpen } = this.props;\n\t\tgetOtherMediaOptions( allowedTypes, ( otherMediaOptions ) => {\n\t\t\tconst otherMediaOptionsWithIcons = otherMediaOptions.map(\n\t\t\t\t( option ) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...option,\n\t\t\t\t\t\trequiresModal: true,\n\t\t\t\t\t\ttypes: allowedTypes,\n\t\t\t\t\t\tid: option.value,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tthis.setState( { otherMediaOptions: otherMediaOptionsWithIcons } );\n\t\t} );\n\n\t\tif ( autoOpen ) {\n\t\t\tthis.onPickerPresent();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout( this.pickerTimeout );\n\t}\n\n\tgetAllSources() {\n\t\tconst { onSelectURL } = this.props;\n\n\t\tconst cameraImageSource = {\n\t\t\tid: mediaSources.deviceCamera, // ID is the value sent to native.\n\t\t\tvalue: mediaSources.deviceCamera + '-IMAGE', // This is needed to diferenciate image-camera from video-camera sources.\n\t\t\tlabel: __( 'Take a Photo' ),\n\t\t\trequiresModal: true,\n\t\t\ttypes: [ MEDIA_TYPE_IMAGE ],\n\t\t\ticon: capturePhoto,\n\t\t};\n\n\t\tconst cameraVideoSource = {\n\t\t\tid: mediaSources.deviceCamera,\n\t\t\tvalue: mediaSources.deviceCamera,\n\t\t\tlabel: __( 'Take a Video' ),\n\t\t\trequiresModal: true,\n\t\t\ttypes: [ MEDIA_TYPE_VIDEO ],\n\t\t\ticon: captureVideo,\n\t\t};\n\n\t\tconst deviceLibrarySource = {\n\t\t\tid: mediaSources.deviceLibrary,\n\t\t\tvalue: mediaSources.deviceLibrary,\n\t\t\tlabel: __( 'Choose from device' ),\n\t\t\trequiresModal: true,\n\t\t\ttypes: [ MEDIA_TYPE_IMAGE, MEDIA_TYPE_VIDEO ],\n\t\t\ticon: image,\n\t\t};\n\n\t\tconst siteLibrarySource = {\n\t\t\tid: mediaSources.siteMediaLibrary,\n\t\t\tvalue: mediaSources.siteMediaLibrary,\n\t\t\tlabel: __( 'WordPress Media Library' ),\n\t\t\trequiresModal: true,\n\t\t\ttypes: [\n\t\t\t\tMEDIA_TYPE_IMAGE,\n\t\t\t\tMEDIA_TYPE_VIDEO,\n\t\t\t\tMEDIA_TYPE_AUDIO,\n\t\t\t\tMEDIA_TYPE_ANY,\n\t\t\t],\n\t\t\ticon: wordpress,\n\t\t\tmediaLibrary: true,\n\t\t};\n\n\t\tconst urlSource = {\n\t\t\tid: URL_MEDIA_SOURCE,\n\t\t\tvalue: URL_MEDIA_SOURCE,\n\t\t\tlabel: __( 'Insert from URL' ),\n\t\t\ttypes: [ MEDIA_TYPE_AUDIO, MEDIA_TYPE_IMAGE, MEDIA_TYPE_VIDEO ],\n\t\t\ticon: globe,\n\t\t};\n\n\t\t// Only include `urlSource` option if `onSelectURL` prop is present, in order to match the web behavior.\n\t\tconst internalSources = [\n\t\t\tdeviceLibrarySource,\n\t\t\tcameraImageSource,\n\t\t\tcameraVideoSource,\n\t\t\tsiteLibrarySource,\n\t\t\t...( onSelectURL ? [ urlSource ] : [] ),\n\t\t];\n\n\t\treturn internalSources.concat( this.state.otherMediaOptions );\n\t}\n\n\tgetMediaOptionsItems() {\n\t\tconst {\n\t\t\tallowedTypes = [],\n\t\t\t__experimentalOnlyMediaLibrary,\n\t\t\tisAudioBlockMediaUploadEnabled,\n\t\t} = this.props;\n\n\t\treturn this.getAllSources()\n\t\t\t.filter( ( source ) => {\n\t\t\t\tif ( __experimentalOnlyMediaLibrary ) {\n\t\t\t\t\treturn source.mediaLibrary;\n\t\t\t\t} else if (\n\t\t\t\t\tallowedTypes.every(\n\t\t\t\t\t\t( allowedType ) =>\n\t\t\t\t\t\t\tallowedType === MEDIA_TYPE_AUDIO &&\n\t\t\t\t\t\t\tsource.types.includes( allowedType )\n\t\t\t\t\t) &&\n\t\t\t\t\tsource.id !== URL_MEDIA_SOURCE\n\t\t\t\t) {\n\t\t\t\t\treturn isAudioBlockMediaUploadEnabled === true;\n\t\t\t\t}\n\n\t\t\t\treturn allowedTypes.some( ( allowedType ) =>\n\t\t\t\t\tsource.types.includes( allowedType )\n\t\t\t\t);\n\t\t\t} )\n\t\t\t.map( ( source ) => {\n\t\t\t\treturn {\n\t\t\t\t\t...source,\n\t\t\t\t\ticon: source.icon || this.getChooseFromDeviceIcon(),\n\t\t\t\t};\n\t\t\t} );\n\t}\n\n\tgetChooseFromDeviceIcon() {\n\t\treturn mobile;\n\t}\n\n\tonPickerPresent() {\n\t\tconst { autoOpen } = this.props;\n\t\tconst isIOS = Platform.OS === 'ios';\n\n\t\tif ( this.picker ) {\n\t\t\t// the delay below is required because on iOS this action sheet gets dismissed by the close event of the Inserter\n\t\t\t// so this delay allows the Inserter to be closed fully before presenting action sheet.\n\t\t\tif ( autoOpen && isIOS ) {\n\t\t\t\tthis.pickerTimeout = setTimeout(\n\t\t\t\t\t() => this.picker.presentPicker(),\n\t\t\t\t\tPICKER_OPENING_DELAY\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.picker.presentPicker();\n\t\t\t}\n\t\t}\n\t}\n\n\tonPickerSelect( value ) {\n\t\tconst {\n\t\t\tallowedTypes = [],\n\t\t\tonSelect,\n\t\t\tonSelectURL,\n\t\t\tmultiple = false,\n\t\t} = this.props;\n\n\t\tif ( value === URL_MEDIA_SOURCE ) {\n\t\t\tprompt(\n\t\t\t\t__( 'Type a URL' ), // title\n\t\t\t\tundefined, // message\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: __( 'Cancel' ),\n\t\t\t\t\t\tstyle: 'cancel',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: __( 'Apply' ),\n\t\t\t\t\t\tonPress: onSelectURL,\n\t\t\t\t\t},\n\t\t\t\t], // Buttons.\n\t\t\t\t'plain-text', // type\n\t\t\t\tundefined, // defaultValue\n\t\t\t\t'url' // keyboardType\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst mediaSource = this.getAllSources()\n\t\t\t.filter( ( source ) => source.value === value )\n\t\t\t.shift();\n\t\tconst types = allowedTypes.filter( ( type ) =>\n\t\t\tmediaSource.types.includes( type )\n\t\t);\n\n\t\trequestMediaPicker( mediaSource.id, types, multiple, ( media ) => {\n\t\t\tif ( ( multiple && media ) || ( media && media.id ) ) {\n\t\t\t\tonSelect( media );\n\t\t\t}\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst { allowedTypes = [], isReplacingMedia, multiple } = this.props;\n\t\tconst isOneType = allowedTypes.length === 1;\n\t\tconst isImage = isOneType && allowedTypes.includes( MEDIA_TYPE_IMAGE );\n\t\tconst isVideo = isOneType && allowedTypes.includes( MEDIA_TYPE_VIDEO );\n\t\tconst isAudio = isOneType && allowedTypes.includes( MEDIA_TYPE_AUDIO );\n\t\tconst isAnyType = isOneType && allowedTypes.includes( MEDIA_TYPE_ANY );\n\n\t\tconst isImageOrVideo =\n\t\t\tallowedTypes.length === 2 &&\n\t\t\tallowedTypes.includes( MEDIA_TYPE_IMAGE ) &&\n\t\t\tallowedTypes.includes( MEDIA_TYPE_VIDEO );\n\n\t\tlet pickerTitle;\n\t\tif ( isImage ) {\n\t\t\tif ( isReplacingMedia ) {\n\t\t\t\tpickerTitle = __( 'Replace image' );\n\t\t\t} else {\n\t\t\t\tpickerTitle = multiple\n\t\t\t\t\t? __( 'Choose images' )\n\t\t\t\t\t: __( 'Choose image' );\n\t\t\t}\n\t\t} else if ( isVideo ) {\n\t\t\tif ( isReplacingMedia ) {\n\t\t\t\tpickerTitle = __( 'Replace video' );\n\t\t\t} else {\n\t\t\t\tpickerTitle = __( 'Choose video' );\n\t\t\t}\n\t\t} else if ( isImageOrVideo ) {\n\t\t\tif ( isReplacingMedia ) {\n\t\t\t\tpickerTitle = __( 'Replace image or video' );\n\t\t\t} else {\n\t\t\t\tpickerTitle = __( 'Choose image or video' );\n\t\t\t}\n\t\t} else if ( isAudio ) {\n\t\t\tif ( isReplacingMedia ) {\n\t\t\t\tpickerTitle = __( 'Replace audio' );\n\t\t\t} else {\n\t\t\t\tpickerTitle = __( 'Choose audio' );\n\t\t\t}\n\t\t} else if ( isAnyType ) {\n\t\t\tpickerTitle = __( 'Choose file' );\n\t\t\tif ( isReplacingMedia ) {\n\t\t\t\tpickerTitle = __( 'Replace file' );\n\t\t\t} else {\n\t\t\t\tpickerTitle = __( 'Choose file' );\n\t\t\t}\n\t\t}\n\n\t\tconst getMediaOptions = () => (\n\t\t\t<Picker\n\t\t\t\ttitle={ pickerTitle }\n\t\t\t\thideCancelButton\n\t\t\t\tref={ ( instance ) => ( this.picker = instance ) }\n\t\t\t\toptions={ this.getMediaOptionsItems() }\n\t\t\t\tonChange={ this.onPickerSelect }\n\t\t\t\ttestID=\"media-options-picker\"\n\t\t\t/>\n\t\t);\n\n\t\treturn this.props.render( {\n\t\t\topen: this.onPickerPresent,\n\t\t\tgetMediaOptions,\n\t\t} );\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { capabilities } = select( blockEditorStore ).getSettings();\n\t\treturn {\n\t\t\tisAudioBlockMediaUploadEnabled:\n\t\t\t\tcapabilities?.isAudioBlockMediaUploadEnabled === true,\n\t\t};\n\t} ),\n] )( MediaUpload );\n"],"mappings":"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"}