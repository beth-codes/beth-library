{"version":3,"names":["_element","require","_i18n","_compose","_components","_a11y","_blockPatternsList","_interopRequireDefault","_noResults","_useInsertionPoint","_usePatternsState","_inserterListbox","_searchItems","INITIAL_INSERTER_RESULTS","PatternsListHeader","filterValue","filteredBlockPatternsLength","createElement","__experimentalHeading","level","lineHeight","className","sprintf","_n","PatternList","selectedCategory","patternCategories","debouncedSpeak","useDebounce","speak","destinationRootClientId","onInsertBlocks","useInsertionPoint","shouldFocusBlock","allPatterns","onSelectBlockPattern","usePatternsState","registeredPatternCategories","useMemo","map","patternCategory","name","filteredBlockPatterns","filter","pattern","categories","length","every","category","includes","searchItems","useEffect","count","resultsFoundMessage","currentShownPatterns","useAsyncList","step","hasItems","default","shownPatterns","blockPatterns","onClickPattern","isDraggable","_default","exports"],"sources":["@wordpress/block-editor/src/components/inserter/block-patterns-explorer/patterns-list.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useMemo, useEffect } from '@wordpress/element';\nimport { _n, sprintf } from '@wordpress/i18n';\nimport { useDebounce, useAsyncList } from '@wordpress/compose';\nimport { __experimentalHeading as Heading } from '@wordpress/components';\nimport { speak } from '@wordpress/a11y';\n\n/**\n * Internal dependencies\n */\nimport BlockPatternsList from '../../block-patterns-list';\nimport InserterNoResults from '../no-results';\nimport useInsertionPoint from '../hooks/use-insertion-point';\nimport usePatternsState from '../hooks/use-patterns-state';\nimport InserterListbox from '../../inserter-listbox';\nimport { searchItems } from '../search-items';\n\nconst INITIAL_INSERTER_RESULTS = 2;\n\nfunction PatternsListHeader( { filterValue, filteredBlockPatternsLength } ) {\n\tif ( ! filterValue ) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<Heading\n\t\t\tlevel={ 2 }\n\t\t\tlineHeight={ '48px' }\n\t\t\tclassName=\"block-editor-block-patterns-explorer__search-results-count\"\n\t\t>\n\t\t\t{ sprintf(\n\t\t\t\t/* translators: %d: number of patterns. %s: block pattern search query */\n\t\t\t\t_n(\n\t\t\t\t\t'%1$d pattern found for \"%2$s\"',\n\t\t\t\t\t'%1$d patterns found for \"%2$s\"',\n\t\t\t\t\tfilteredBlockPatternsLength\n\t\t\t\t),\n\t\t\t\tfilteredBlockPatternsLength,\n\t\t\t\tfilterValue\n\t\t\t) }\n\t\t</Heading>\n\t);\n}\n\nfunction PatternList( { filterValue, selectedCategory, patternCategories } ) {\n\tconst debouncedSpeak = useDebounce( speak, 500 );\n\tconst [ destinationRootClientId, onInsertBlocks ] = useInsertionPoint( {\n\t\tshouldFocusBlock: true,\n\t} );\n\tconst [ allPatterns, , onSelectBlockPattern ] = usePatternsState(\n\t\tonInsertBlocks,\n\t\tdestinationRootClientId\n\t);\n\n\tconst registeredPatternCategories = useMemo(\n\t\t() =>\n\t\t\tpatternCategories.map(\n\t\t\t\t( patternCategory ) => patternCategory.name\n\t\t\t),\n\t\t[ patternCategories ]\n\t);\n\n\tconst filteredBlockPatterns = useMemo( () => {\n\t\tif ( ! filterValue ) {\n\t\t\treturn allPatterns.filter( ( pattern ) =>\n\t\t\t\tselectedCategory === 'uncategorized'\n\t\t\t\t\t? ! pattern.categories?.length ||\n\t\t\t\t\t  pattern.categories.every(\n\t\t\t\t\t\t\t( category ) =>\n\t\t\t\t\t\t\t\t! registeredPatternCategories.includes(\n\t\t\t\t\t\t\t\t\tcategory\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t  )\n\t\t\t\t\t: pattern.categories?.includes( selectedCategory )\n\t\t\t);\n\t\t}\n\t\treturn searchItems( allPatterns, filterValue );\n\t}, [\n\t\tfilterValue,\n\t\tallPatterns,\n\t\tselectedCategory,\n\t\tregisteredPatternCategories,\n\t] );\n\n\t// Announce search results on change.\n\tuseEffect( () => {\n\t\tif ( ! filterValue ) {\n\t\t\treturn;\n\t\t}\n\t\tconst count = filteredBlockPatterns.length;\n\t\tconst resultsFoundMessage = sprintf(\n\t\t\t/* translators: %d: number of results. */\n\t\t\t_n( '%d result found.', '%d results found.', count ),\n\t\t\tcount\n\t\t);\n\t\tdebouncedSpeak( resultsFoundMessage );\n\t}, [ filterValue, debouncedSpeak, filteredBlockPatterns.length ] );\n\n\tconst currentShownPatterns = useAsyncList( filteredBlockPatterns, {\n\t\tstep: INITIAL_INSERTER_RESULTS,\n\t} );\n\n\tconst hasItems = !! filteredBlockPatterns?.length;\n\treturn (\n\t\t<div className=\"block-editor-block-patterns-explorer__list\">\n\t\t\t{ hasItems && (\n\t\t\t\t<PatternsListHeader\n\t\t\t\t\tfilterValue={ filterValue }\n\t\t\t\t\tfilteredBlockPatternsLength={ filteredBlockPatterns.length }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t<InserterListbox>\n\t\t\t\t{ ! hasItems && <InserterNoResults /> }\n\t\t\t\t{ hasItems && (\n\t\t\t\t\t<BlockPatternsList\n\t\t\t\t\t\tshownPatterns={ currentShownPatterns }\n\t\t\t\t\t\tblockPatterns={ filteredBlockPatterns }\n\t\t\t\t\t\tonClickPattern={ onSelectBlockPattern }\n\t\t\t\t\t\tisDraggable={ false }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</InserterListbox>\n\t\t</div>\n\t);\n}\n\nexport default PatternList;\n"],"mappings":"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"}