{"version":3,"names":["parseInt","window","isList","node","nodeName","msListConverter","doc","style","getAttribute","indexOf","matches","exec","level","prevNode","previousElementSibling","type","textContent","trim","slice","isNumeric","test","newListNode","createElement","setAttribute","parentNode","insertBefore","listNode","listType","listItem","receivingNode","removeChild","firstChild","appendChild","lastChild"],"sources":["@wordpress/blocks/src/api/raw-handling/ms-list-converter.js"],"sourcesContent":["/**\n * Browser dependencies\n */\nconst { parseInt } = window;\n\nfunction isList( node ) {\n\treturn node.nodeName === 'OL' || node.nodeName === 'UL';\n}\n\nexport default function msListConverter( node, doc ) {\n\tif ( node.nodeName !== 'P' ) {\n\t\treturn;\n\t}\n\n\tconst style = node.getAttribute( 'style' );\n\n\tif ( ! style ) {\n\t\treturn;\n\t}\n\n\t// Quick check.\n\tif ( style.indexOf( 'mso-list' ) === -1 ) {\n\t\treturn;\n\t}\n\n\tconst matches = /mso-list\\s*:[^;]+level([0-9]+)/i.exec( style );\n\n\tif ( ! matches ) {\n\t\treturn;\n\t}\n\n\tlet level = parseInt( matches[ 1 ], 10 ) - 1 || 0;\n\n\tconst prevNode = node.previousElementSibling;\n\n\t// Add new list if no previous.\n\tif ( ! prevNode || ! isList( prevNode ) ) {\n\t\t// See https://html.spec.whatwg.org/multipage/grouping-content.html#attr-ol-type.\n\t\tconst type = node.textContent.trim().slice( 0, 1 );\n\t\tconst isNumeric = /[1iIaA]/.test( type );\n\t\tconst newListNode = doc.createElement( isNumeric ? 'ol' : 'ul' );\n\n\t\tif ( isNumeric ) {\n\t\t\tnewListNode.setAttribute( 'type', type );\n\t\t}\n\n\t\tnode.parentNode.insertBefore( newListNode, node );\n\t}\n\n\tconst listNode = node.previousElementSibling;\n\tconst listType = listNode.nodeName;\n\tconst listItem = doc.createElement( 'li' );\n\n\tlet receivingNode = listNode;\n\n\t// Remove the first span with list info.\n\tnode.removeChild( node.firstChild );\n\n\t// Add content.\n\twhile ( node.firstChild ) {\n\t\tlistItem.appendChild( node.firstChild );\n\t}\n\n\t// Change pointer depending on indentation level.\n\twhile ( level-- ) {\n\t\treceivingNode = receivingNode.lastChild || receivingNode;\n\n\t\t// If it's a list, move pointer to the last item.\n\t\tif ( isList( receivingNode ) ) {\n\t\t\treceivingNode = receivingNode.lastChild || receivingNode;\n\t\t}\n\t}\n\n\t// Make sure we append to a list.\n\tif ( ! isList( receivingNode ) ) {\n\t\treceivingNode = receivingNode.appendChild(\n\t\t\tdoc.createElement( listType )\n\t\t);\n\t}\n\n\t// Append the list item to the list.\n\treceivingNode.appendChild( listItem );\n\n\t// Remove the wrapper paragraph.\n\tnode.parentNode.removeChild( node );\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,MAAM;EAAEA;AAAS,CAAC,GAAGC,MAAM;AAE3B,SAASC,MAAMA,CAAEC,IAAI,EAAG;EACvB,OAAOA,IAAI,CAACC,QAAQ,KAAK,IAAI,IAAID,IAAI,CAACC,QAAQ,KAAK,IAAI;AACxD;AAEA,eAAe,SAASC,eAAeA,CAAEF,IAAI,EAAEG,GAAG,EAAG;EACpD,IAAKH,IAAI,CAACC,QAAQ,KAAK,GAAG,EAAG;IAC5B;EACD;EAEA,MAAMG,KAAK,GAAGJ,IAAI,CAACK,YAAY,CAAE,OAAQ,CAAC;EAE1C,IAAK,CAAED,KAAK,EAAG;IACd;EACD;;EAEA;EACA,IAAKA,KAAK,CAACE,OAAO,CAAE,UAAW,CAAC,KAAK,CAAC,CAAC,EAAG;IACzC;EACD;EAEA,MAAMC,OAAO,GAAG,iCAAiC,CAACC,IAAI,CAAEJ,KAAM,CAAC;EAE/D,IAAK,CAAEG,OAAO,EAAG;IAChB;EACD;EAEA,IAAIE,KAAK,GAAGZ,QAAQ,CAAEU,OAAO,CAAE,CAAC,CAAE,EAAE,EAAG,CAAC,GAAG,CAAC,IAAI,CAAC;EAEjD,MAAMG,QAAQ,GAAGV,IAAI,CAACW,sBAAsB;;EAE5C;EACA,IAAK,CAAED,QAAQ,IAAI,CAAEX,MAAM,CAAEW,QAAS,CAAC,EAAG;IACzC;IACA,MAAME,IAAI,GAAGZ,IAAI,CAACa,WAAW,CAACC,IAAI,CAAC,CAAC,CAACC,KAAK,CAAE,CAAC,EAAE,CAAE,CAAC;IAClD,MAAMC,SAAS,GAAG,SAAS,CAACC,IAAI,CAAEL,IAAK,CAAC;IACxC,MAAMM,WAAW,GAAGf,GAAG,CAACgB,aAAa,CAAEH,SAAS,GAAG,IAAI,GAAG,IAAK,CAAC;IAEhE,IAAKA,SAAS,EAAG;MAChBE,WAAW,CAACE,YAAY,CAAE,MAAM,EAAER,IAAK,CAAC;IACzC;IAEAZ,IAAI,CAACqB,UAAU,CAACC,YAAY,CAAEJ,WAAW,EAAElB,IAAK,CAAC;EAClD;EAEA,MAAMuB,QAAQ,GAAGvB,IAAI,CAACW,sBAAsB;EAC5C,MAAMa,QAAQ,GAAGD,QAAQ,CAACtB,QAAQ;EAClC,MAAMwB,QAAQ,GAAGtB,GAAG,CAACgB,aAAa,CAAE,IAAK,CAAC;EAE1C,IAAIO,aAAa,GAAGH,QAAQ;;EAE5B;EACAvB,IAAI,CAAC2B,WAAW,CAAE3B,IAAI,CAAC4B,UAAW,CAAC;;EAEnC;EACA,OAAQ5B,IAAI,CAAC4B,UAAU,EAAG;IACzBH,QAAQ,CAACI,WAAW,CAAE7B,IAAI,CAAC4B,UAAW,CAAC;EACxC;;EAEA;EACA,OAAQnB,KAAK,EAAE,EAAG;IACjBiB,aAAa,GAAGA,aAAa,CAACI,SAAS,IAAIJ,aAAa;;IAExD;IACA,IAAK3B,MAAM,CAAE2B,aAAc,CAAC,EAAG;MAC9BA,aAAa,GAAGA,aAAa,CAACI,SAAS,IAAIJ,aAAa;IACzD;EACD;;EAEA;EACA,IAAK,CAAE3B,MAAM,CAAE2B,aAAc,CAAC,EAAG;IAChCA,aAAa,GAAGA,aAAa,CAACG,WAAW,CACxC1B,GAAG,CAACgB,aAAa,CAAEK,QAAS,CAC7B,CAAC;EACF;;EAEA;EACAE,aAAa,CAACG,WAAW,CAAEJ,QAAS,CAAC;;EAErC;EACAzB,IAAI,CAACqB,UAAU,CAACM,WAAW,CAAE3B,IAAK,CAAC;AACpC"}