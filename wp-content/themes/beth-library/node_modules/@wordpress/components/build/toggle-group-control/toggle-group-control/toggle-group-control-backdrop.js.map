{"version":3,"names":["_element","require","_styles","ToggleGroupControlBackdrop","containerRef","containerWidth","isAdaptiveWidth","state","left","setLeft","useState","width","setWidth","canAnimate","setCanAnimate","renderBackdrop","setRenderBackdrop","useEffect","containerNode","current","targetNode","querySelector","computeDimensions","offsetWidth","x","getBoundingClientRect","parentX","borderWidth","offsetLeft","dimensionsRequestId","window","setTimeout","animationRequestId","requestAnimationFrame","clearTimeout","cancelAnimationFrame","createElement","BackdropView","role","style","transform","transition","undefined","_default","memo","exports","default"],"sources":["@wordpress/components/src/toggle-group-control/toggle-group-control/toggle-group-control-backdrop.tsx"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useState, useEffect, memo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport type { ToggleGroupControlBackdropProps } from '../types';\nimport { BackdropView } from './styles';\n\nfunction ToggleGroupControlBackdrop( {\n\tcontainerRef,\n\tcontainerWidth,\n\tisAdaptiveWidth,\n\tstate,\n}: ToggleGroupControlBackdropProps ) {\n\tconst [ left, setLeft ] = useState( 0 );\n\tconst [ width, setWidth ] = useState( 0 );\n\tconst [ canAnimate, setCanAnimate ] = useState( false );\n\tconst [ renderBackdrop, setRenderBackdrop ] = useState( false );\n\n\tuseEffect( () => {\n\t\tconst containerNode = containerRef?.current;\n\t\tif ( ! containerNode ) return;\n\n\t\t/**\n\t\t * Workaround for Reakit\n\t\t */\n\t\tconst targetNode = containerNode.querySelector(\n\t\t\t`[data-value=\"${ state }\"]`\n\t\t);\n\t\tsetRenderBackdrop( !! targetNode );\n\t\tif ( ! targetNode ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst computeDimensions = () => {\n\t\t\tconst { width: offsetWidth, x } =\n\t\t\t\ttargetNode.getBoundingClientRect();\n\n\t\t\tconst { x: parentX } = containerNode.getBoundingClientRect();\n\n\t\t\tconst borderWidth = 1;\n\t\t\tconst offsetLeft = x - parentX - borderWidth;\n\n\t\t\tsetLeft( offsetLeft );\n\t\t\tsetWidth( offsetWidth );\n\t\t};\n\t\t// Fix to make the component appear as expected inside popovers.\n\t\t// If the targetNode width is 0 it means the element was not yet rendered we should allow\n\t\t// some time for the render to happen.\n\t\t// requestAnimationFrame instead of setTimeout with a small time does not seems to work.\n\t\tconst dimensionsRequestId = window.setTimeout( computeDimensions, 100 );\n\n\t\tlet animationRequestId: number;\n\t\tif ( ! canAnimate ) {\n\t\t\tanimationRequestId = window.requestAnimationFrame( () => {\n\t\t\t\tsetCanAnimate( true );\n\t\t\t} );\n\t\t}\n\t\treturn () => {\n\t\t\twindow.clearTimeout( dimensionsRequestId );\n\t\t\twindow.cancelAnimationFrame( animationRequestId );\n\t\t};\n\t}, [ canAnimate, containerRef, containerWidth, state, isAdaptiveWidth ] );\n\n\tif ( ! renderBackdrop ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<BackdropView\n\t\t\trole=\"presentation\"\n\t\t\tstyle={ {\n\t\t\t\ttransform: `translateX(${ left }px)`,\n\t\t\t\ttransition: canAnimate ? undefined : 'none',\n\t\t\t\twidth,\n\t\t\t} }\n\t\t/>\n\t);\n}\n\nexport default memo( ToggleGroupControlBackdrop );\n"],"mappings":";;;;;;AAGA,IAAAA,QAAA,GAAAC,OAAA;AAMA,IAAAC,OAAA,GAAAD,OAAA;AATA;AACA;AACA;;AASA,SAASE,0BAA0BA,CAAE;EACpCC,YAAY;EACZC,cAAc;EACdC,eAAe;EACfC;AACgC,CAAC,EAAG;EACpC,MAAM,CAAEC,IAAI,EAAEC,OAAO,CAAE,GAAG,IAAAC,iBAAQ,EAAE,CAAE,CAAC;EACvC,MAAM,CAAEC,KAAK,EAAEC,QAAQ,CAAE,GAAG,IAAAF,iBAAQ,EAAE,CAAE,CAAC;EACzC,MAAM,CAAEG,UAAU,EAAEC,aAAa,CAAE,GAAG,IAAAJ,iBAAQ,EAAE,KAAM,CAAC;EACvD,MAAM,CAAEK,cAAc,EAAEC,iBAAiB,CAAE,GAAG,IAAAN,iBAAQ,EAAE,KAAM,CAAC;EAE/D,IAAAO,kBAAS,EAAE,MAAM;IAChB,MAAMC,aAAa,GAAGd,YAAY,EAAEe,OAAO;IAC3C,IAAK,CAAED,aAAa,EAAG;;IAEvB;AACF;AACA;IACE,MAAME,UAAU,GAAGF,aAAa,CAACG,aAAa,CAC5C,gBAAgBd,KAAO,IACzB,CAAC;IACDS,iBAAiB,CAAE,CAAC,CAAEI,UAAW,CAAC;IAClC,IAAK,CAAEA,UAAU,EAAG;MACnB;IACD;IAEA,MAAME,iBAAiB,GAAGA,CAAA,KAAM;MAC/B,MAAM;QAAEX,KAAK,EAAEY,WAAW;QAAEC;MAAE,CAAC,GAC9BJ,UAAU,CAACK,qBAAqB,CAAC,CAAC;MAEnC,MAAM;QAAED,CAAC,EAAEE;MAAQ,CAAC,GAAGR,aAAa,CAACO,qBAAqB,CAAC,CAAC;MAE5D,MAAME,WAAW,GAAG,CAAC;MACrB,MAAMC,UAAU,GAAGJ,CAAC,GAAGE,OAAO,GAAGC,WAAW;MAE5ClB,OAAO,CAAEmB,UAAW,CAAC;MACrBhB,QAAQ,CAAEW,WAAY,CAAC;IACxB,CAAC;IACD;IACA;IACA;IACA;IACA,MAAMM,mBAAmB,GAAGC,MAAM,CAACC,UAAU,CAAET,iBAAiB,EAAE,GAAI,CAAC;IAEvE,IAAIU,kBAA0B;IAC9B,IAAK,CAAEnB,UAAU,EAAG;MACnBmB,kBAAkB,GAAGF,MAAM,CAACG,qBAAqB,CAAE,MAAM;QACxDnB,aAAa,CAAE,IAAK,CAAC;MACtB,CAAE,CAAC;IACJ;IACA,OAAO,MAAM;MACZgB,MAAM,CAACI,YAAY,CAAEL,mBAAoB,CAAC;MAC1CC,MAAM,CAACK,oBAAoB,CAAEH,kBAAmB,CAAC;IAClD,CAAC;EACF,CAAC,EAAE,CAAEnB,UAAU,EAAET,YAAY,EAAEC,cAAc,EAAEE,KAAK,EAAED,eAAe,CAAG,CAAC;EAEzE,IAAK,CAAES,cAAc,EAAG;IACvB,OAAO,IAAI;EACZ;EAEA,OACC,IAAAf,QAAA,CAAAoC,aAAA,EAAClC,OAAA,CAAAmC,YAAY;IACZC,IAAI,EAAC,cAAc;IACnBC,KAAK,EAAG;MACPC,SAAS,EAAG,cAAchC,IAAM,KAAI;MACpCiC,UAAU,EAAE5B,UAAU,GAAG6B,SAAS,GAAG,MAAM;MAC3C/B;IACD;EAAG,CACH,CAAC;AAEJ;AAAC,IAAAgC,QAAA,GAEc,IAAAC,aAAI,EAAEzC,0BAA2B,CAAC;AAAA0C,OAAA,CAAAC,OAAA,GAAAH,QAAA"}