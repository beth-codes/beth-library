{"version":3,"names":["POSITION_TO_PLACEMENT","bottom","top","middle","positionToPlacement","position","_POSITION_TO_PLACEMEN","PLACEMENT_TO_ANIMATION_ORIGIN","originX","originY","right","left","overlay","placementToMotionAnimationProps","placement","translateProp","startsWith","translateDirection","style","initial","opacity","scale","animate","transition","duration","ease","getFrameOffset","document","frameElement","defaultView","iframeRect","getBoundingClientRect","x","y","getFrameScale","rect","width","offsetWidth","height","offsetHeight","getReferenceOwnerDocument","anchor","anchorRef","anchorRect","getAnchorRect","fallbackReferenceElement","fallbackDocument","_resultingReferenceOw","resultingReferenceOwnerDoc","ownerDocument","startContainer","current","getReferenceElement","_referenceElement","referenceElement","topRect","bottomRect","window","DOMRect","_rect$x","_rect$y","_rect$width","_rect$height","parentElement","computePopoverPosition","c","Number","isNaN","undefined","Math","round"],"sources":["@wordpress/components/src/popover/utils.ts"],"sourcesContent":["/**\n * External dependencies\n */\n// eslint-disable-next-line no-restricted-imports\nimport type { MotionProps } from 'framer-motion';\nimport type { ReferenceType } from '@floating-ui/react-dom';\n\n/**\n * Internal dependencies\n */\nimport type {\n\tPopoverProps,\n\tPopoverAnchorRefReference,\n\tPopoverAnchorRefTopBottom,\n} from './types';\n\nconst POSITION_TO_PLACEMENT: Record<\n\tNonNullable< PopoverProps[ 'position' ] >,\n\tNonNullable< PopoverProps[ 'placement' ] >\n> = {\n\tbottom: 'bottom',\n\ttop: 'top',\n\t'middle left': 'left',\n\t'middle right': 'right',\n\t'bottom left': 'bottom-end',\n\t'bottom center': 'bottom',\n\t'bottom right': 'bottom-start',\n\t'top left': 'top-end',\n\t'top center': 'top',\n\t'top right': 'top-start',\n\t'middle left left': 'left',\n\t'middle left right': 'left',\n\t'middle left bottom': 'left-end',\n\t'middle left top': 'left-start',\n\t'middle right left': 'right',\n\t'middle right right': 'right',\n\t'middle right bottom': 'right-end',\n\t'middle right top': 'right-start',\n\t'bottom left left': 'bottom-end',\n\t'bottom left right': 'bottom-end',\n\t'bottom left bottom': 'bottom-end',\n\t'bottom left top': 'bottom-end',\n\t'bottom center left': 'bottom',\n\t'bottom center right': 'bottom',\n\t'bottom center bottom': 'bottom',\n\t'bottom center top': 'bottom',\n\t'bottom right left': 'bottom-start',\n\t'bottom right right': 'bottom-start',\n\t'bottom right bottom': 'bottom-start',\n\t'bottom right top': 'bottom-start',\n\t'top left left': 'top-end',\n\t'top left right': 'top-end',\n\t'top left bottom': 'top-end',\n\t'top left top': 'top-end',\n\t'top center left': 'top',\n\t'top center right': 'top',\n\t'top center bottom': 'top',\n\t'top center top': 'top',\n\t'top right left': 'top-start',\n\t'top right right': 'top-start',\n\t'top right bottom': 'top-start',\n\t'top right top': 'top-start',\n\t// `middle`/`middle center [corner?]` positions are associated to a fallback\n\t// `bottom` placement because there aren't any corresponding placement values.\n\tmiddle: 'bottom',\n\t'middle center': 'bottom',\n\t'middle center bottom': 'bottom',\n\t'middle center left': 'bottom',\n\t'middle center right': 'bottom',\n\t'middle center top': 'bottom',\n};\n\n/**\n * Converts the `Popover`'s legacy \"position\" prop to the new \"placement\" prop\n * (used by `floating-ui`).\n *\n * @param position The legacy position\n * @return The corresponding placement\n */\nexport const positionToPlacement = (\n\tposition: NonNullable< PopoverProps[ 'position' ] >\n): NonNullable< PopoverProps[ 'placement' ] > =>\n\tPOSITION_TO_PLACEMENT[ position ] ?? 'bottom';\n\n/**\n * @typedef AnimationOrigin\n * @type {Object}\n * @property {number} originX A number between 0 and 1 (in CSS logical properties jargon, 0 is \"start\", 0.5 is \"center\", and 1 is \"end\")\n * @property {number} originY A number between 0 and 1 (0 is top, 0.5 is center, and 1 is bottom)\n */\n\nconst PLACEMENT_TO_ANIMATION_ORIGIN: Record<\n\tNonNullable< PopoverProps[ 'placement' ] >,\n\t{ originX: number; originY: number }\n> = {\n\ttop: { originX: 0.5, originY: 1 }, // open from bottom, center\n\t'top-start': { originX: 0, originY: 1 }, // open from bottom, left\n\t'top-end': { originX: 1, originY: 1 }, // open from bottom, right\n\tright: { originX: 0, originY: 0.5 }, // open from middle, left\n\t'right-start': { originX: 0, originY: 0 }, // open from top, left\n\t'right-end': { originX: 0, originY: 1 }, // open from bottom, left\n\tbottom: { originX: 0.5, originY: 0 }, // open from top, center\n\t'bottom-start': { originX: 0, originY: 0 }, // open from top, left\n\t'bottom-end': { originX: 1, originY: 0 }, // open from top, right\n\tleft: { originX: 1, originY: 0.5 }, // open from middle, right\n\t'left-start': { originX: 1, originY: 0 }, // open from top, right\n\t'left-end': { originX: 1, originY: 1 }, // open from bottom, right\n\toverlay: { originX: 0.5, originY: 0.5 }, // open from center, center\n};\n\n/**\n * Given the floating-ui `placement`, compute the framer-motion props for the\n * popover's entry animation.\n *\n * @param placement A placement string from floating ui\n * @return The object containing the motion props\n */\nexport const placementToMotionAnimationProps = (\n\tplacement: NonNullable< PopoverProps[ 'placement' ] >\n): MotionProps => {\n\tconst translateProp =\n\t\tplacement.startsWith( 'top' ) || placement.startsWith( 'bottom' )\n\t\t\t? 'translateY'\n\t\t\t: 'translateX';\n\tconst translateDirection =\n\t\tplacement.startsWith( 'top' ) || placement.startsWith( 'left' )\n\t\t\t? 1\n\t\t\t: -1;\n\n\treturn {\n\t\tstyle: PLACEMENT_TO_ANIMATION_ORIGIN[ placement ],\n\t\tinitial: {\n\t\t\topacity: 0,\n\t\t\tscale: 0,\n\t\t\t[ translateProp ]: `${ 2 * translateDirection }em`,\n\t\t},\n\t\tanimate: { opacity: 1, scale: 1, [ translateProp ]: 0 },\n\t\ttransition: { duration: 0.1, ease: [ 0, 0, 0.2, 1 ] },\n\t};\n};\n\n/**\n * Returns the offset of a document's frame element.\n *\n * @param document The iframe's owner document.\n *\n * @return The offset of the document's frame element, or undefined if the\n * document has no frame element.\n */\nexport const getFrameOffset = (\n\tdocument?: Document\n): { x: number; y: number } | undefined => {\n\tconst frameElement = document?.defaultView?.frameElement;\n\tif ( ! frameElement ) {\n\t\treturn;\n\t}\n\tconst iframeRect = frameElement.getBoundingClientRect();\n\treturn { x: iframeRect.left, y: iframeRect.top };\n};\n\nexport const getFrameScale = (\n\tdocument?: Document\n): {\n\tx: number;\n\ty: number;\n} => {\n\tconst frameElement = document?.defaultView?.frameElement as HTMLElement;\n\tif ( ! frameElement ) {\n\t\treturn { x: 1, y: 1 };\n\t}\n\tconst rect = frameElement.getBoundingClientRect();\n\treturn {\n\t\tx: rect.width / frameElement.offsetWidth,\n\t\ty: rect.height / frameElement.offsetHeight,\n\t};\n};\n\nexport const getReferenceOwnerDocument = ( {\n\tanchor,\n\tanchorRef,\n\tanchorRect,\n\tgetAnchorRect,\n\tfallbackReferenceElement,\n\tfallbackDocument,\n}: Pick<\n\tPopoverProps,\n\t'anchorRef' | 'anchorRect' | 'getAnchorRect' | 'anchor'\n> & {\n\tfallbackReferenceElement: Element | null;\n\tfallbackDocument: Document;\n} ): Document => {\n\t// In floating-ui's terms:\n\t// - \"reference\" refers to the popover's anchor element.\n\t// - \"floating\" refers the floating popover's element.\n\t// A floating element can also be positioned relative to a virtual element,\n\t// instead of a real one. A virtual element is represented by an object\n\t// with the `getBoundingClientRect()` function (like real elements).\n\t// See https://floating-ui.com/docs/virtual-elements for more info.\n\tlet resultingReferenceOwnerDoc;\n\tif ( anchor ) {\n\t\tresultingReferenceOwnerDoc = anchor.ownerDocument;\n\t} else if ( ( anchorRef as PopoverAnchorRefTopBottom | undefined )?.top ) {\n\t\tresultingReferenceOwnerDoc = ( anchorRef as PopoverAnchorRefTopBottom )\n\t\t\t?.top.ownerDocument;\n\t} else if ( ( anchorRef as Range | undefined )?.startContainer ) {\n\t\tresultingReferenceOwnerDoc = ( anchorRef as Range ).startContainer\n\t\t\t.ownerDocument;\n\t} else if (\n\t\t( anchorRef as PopoverAnchorRefReference | undefined )?.current\n\t) {\n\t\tresultingReferenceOwnerDoc = (\n\t\t\t( anchorRef as PopoverAnchorRefReference ).current as Element\n\t\t ).ownerDocument;\n\t} else if ( anchorRef as Element | undefined ) {\n\t\t// This one should be deprecated.\n\t\tresultingReferenceOwnerDoc = ( anchorRef as Element ).ownerDocument;\n\t} else if ( anchorRect && anchorRect?.ownerDocument ) {\n\t\tresultingReferenceOwnerDoc = anchorRect.ownerDocument;\n\t} else if ( getAnchorRect ) {\n\t\tresultingReferenceOwnerDoc = getAnchorRect(\n\t\t\tfallbackReferenceElement\n\t\t)?.ownerDocument;\n\t}\n\n\treturn resultingReferenceOwnerDoc ?? fallbackDocument;\n};\n\nexport const getReferenceElement = ( {\n\tanchor,\n\tanchorRef,\n\tanchorRect,\n\tgetAnchorRect,\n\tfallbackReferenceElement,\n\tscale,\n}: Pick<\n\tPopoverProps,\n\t'anchorRef' | 'anchorRect' | 'getAnchorRect' | 'anchor'\n> & {\n\tfallbackReferenceElement: Element | null;\n\tscale: { x: number; y: number };\n} ): ReferenceType | null => {\n\tlet referenceElement = null;\n\n\tif ( anchor ) {\n\t\treferenceElement = anchor;\n\t} else if ( ( anchorRef as PopoverAnchorRefTopBottom | undefined )?.top ) {\n\t\t// Create a virtual element for the ref. The expectation is that\n\t\t// if anchorRef.top is defined, then anchorRef.bottom is defined too.\n\t\t// Seems to be used by the block toolbar, when multiple blocks are selected\n\t\t// (top and bottom blocks are used to calculate the resulting rect).\n\t\treferenceElement = {\n\t\t\tgetBoundingClientRect() {\n\t\t\t\tconst topRect = (\n\t\t\t\t\tanchorRef as PopoverAnchorRefTopBottom\n\t\t\t\t ).top.getBoundingClientRect();\n\t\t\t\tconst bottomRect = (\n\t\t\t\t\tanchorRef as PopoverAnchorRefTopBottom\n\t\t\t\t ).bottom.getBoundingClientRect();\n\t\t\t\treturn new window.DOMRect(\n\t\t\t\t\ttopRect.x,\n\t\t\t\t\ttopRect.y,\n\t\t\t\t\ttopRect.width,\n\t\t\t\t\tbottomRect.bottom - topRect.top\n\t\t\t\t);\n\t\t\t},\n\t\t};\n\t} else if (\n\t\t( anchorRef as PopoverAnchorRefReference | undefined )?.current\n\t) {\n\t\t// Standard React ref.\n\t\treferenceElement = ( anchorRef as PopoverAnchorRefReference ).current;\n\t} else if ( anchorRef as Element | undefined ) {\n\t\t// If `anchorRef` holds directly the element's value (no `current` key)\n\t\t// This is a weird scenario and should be deprecated.\n\t\treferenceElement = anchorRef as Element;\n\t} else if ( anchorRect ) {\n\t\t// Create a virtual element for the ref.\n\t\treferenceElement = {\n\t\t\tgetBoundingClientRect() {\n\t\t\t\treturn anchorRect;\n\t\t\t},\n\t\t};\n\t} else if ( getAnchorRect ) {\n\t\t// Create a virtual element for the ref.\n\t\treferenceElement = {\n\t\t\tgetBoundingClientRect() {\n\t\t\t\tconst rect = getAnchorRect( fallbackReferenceElement );\n\t\t\t\treturn new window.DOMRect(\n\t\t\t\t\trect.x ?? rect.left,\n\t\t\t\t\trect.y ?? rect.top,\n\t\t\t\t\trect.width ?? rect.right - rect.left,\n\t\t\t\t\trect.height ?? rect.bottom - rect.top\n\t\t\t\t);\n\t\t\t},\n\t\t};\n\t} else if ( fallbackReferenceElement ) {\n\t\t// If no explicit ref is passed via props, fall back to\n\t\t// anchoring to the popover's parent node.\n\t\treferenceElement = fallbackReferenceElement.parentElement;\n\t}\n\n\tif ( referenceElement && ( scale.x !== 1 || scale.y !== 1 ) ) {\n\t\t// If the popover is inside an iframe, the coordinates of the\n\t\t// reference element need to be scaled to match the iframe's scale.\n\t\tconst rect = referenceElement.getBoundingClientRect();\n\t\treferenceElement = {\n\t\t\tgetBoundingClientRect() {\n\t\t\t\treturn new window.DOMRect(\n\t\t\t\t\trect.x * scale.x,\n\t\t\t\t\trect.y * scale.y,\n\t\t\t\t\trect.width * scale.x,\n\t\t\t\t\trect.height * scale.y\n\t\t\t\t);\n\t\t\t},\n\t\t};\n\t}\n\n\t// Convert any `undefined` value to `null`.\n\treturn referenceElement ?? null;\n};\n\n/**\n * Computes the final coordinate that needs to be applied to the floating\n * element when applying transform inline styles, defaulting to `undefined`\n * if the provided value is `null` or `NaN`.\n *\n * @param c input coordinate (usually as returned from floating-ui)\n * @return The coordinate's value to be used for inline styles. An `undefined`\n *         return value means \"no style set\" for this coordinate.\n */\nexport const computePopoverPosition = ( c: number | null ) =>\n\tc === null || Number.isNaN( c ) ? undefined : Math.round( c );\n"],"mappings":"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"}