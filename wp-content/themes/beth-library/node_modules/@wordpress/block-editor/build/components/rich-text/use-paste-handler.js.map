{"version":3,"names":["_element","require","_compose","_dom","_blocks","_richText","_url","_utils","_splitValue","_pasting","adjustLines","value","isMultiline","replace","LINE_SEPARATOR","RegExp","usePasteHandler","props","propsRef","useRef","current","useRefEffect","element","_onPaste","event","isSelected","disableFormats","onChange","formatTypes","tagName","onReplace","onSplit","onSplitMiddle","__unstableEmbedURLOnPaste","multilineTag","preserveWhiteSpace","pastePlainText","clipboardData","plainText","html","getData","error1","error2","removeWindowsFragments","removeCharsetMetaTag","preventDefault","window","console","log","insert","transformed","reduce","accumlator","__unstablePasteRule","files","getFilesFromDataTransfer","create","text","length","shouldDismissPastedFiles","fromTransforms","getBlockTransforms","blocks","accumulator","file","transformation","findTransform","transform","type","isMatch","push","flat","isEmpty","splitValue","pastedBlocks","mode","isShortcode","isURL","trim","content","pasteHandler","HTML","disableFilters","valueToInsert","addActiveFormats","activeFormats","addEventListener","removeEventListener","startStr","startIdx","indexOf","substring","endStr","endIdx","metaTag","startsWith","slice"],"sources":["@wordpress/block-editor/src/components/rich-text/use-paste-handler.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport { useRefEffect } from '@wordpress/compose';\nimport { getFilesFromDataTransfer } from '@wordpress/dom';\nimport {\n\tpasteHandler,\n\tfindTransform,\n\tgetBlockTransforms,\n} from '@wordpress/blocks';\nimport {\n\tisEmpty,\n\tinsert,\n\tcreate,\n\treplace,\n\t__UNSTABLE_LINE_SEPARATOR as LINE_SEPARATOR,\n} from '@wordpress/rich-text';\nimport { isURL } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport { addActiveFormats, isShortcode } from './utils';\nimport { splitValue } from './split-value';\nimport { shouldDismissPastedFiles } from '../../utils/pasting';\n\n/** @typedef {import('@wordpress/rich-text').RichTextValue} RichTextValue */\n\n/**\n * Replaces line separators with line breaks if not multiline.\n * Replaces line breaks with line separators if multiline.\n *\n * @param {RichTextValue} value       Value to adjust.\n * @param {boolean}       isMultiline Whether to adjust to multiline or not.\n *\n * @return {RichTextValue} Adjusted value.\n */\nfunction adjustLines( value, isMultiline ) {\n\tif ( isMultiline ) {\n\t\treturn replace( value, /\\n+/g, LINE_SEPARATOR );\n\t}\n\n\treturn replace( value, new RegExp( LINE_SEPARATOR, 'g' ), '\\n' );\n}\n\nexport function usePasteHandler( props ) {\n\tconst propsRef = useRef( props );\n\tpropsRef.current = props;\n\treturn useRefEffect( ( element ) => {\n\t\tfunction _onPaste( event ) {\n\t\t\tconst {\n\t\t\t\tisSelected,\n\t\t\t\tdisableFormats,\n\t\t\t\tonChange,\n\t\t\t\tvalue,\n\t\t\t\tformatTypes,\n\t\t\t\ttagName,\n\t\t\t\tonReplace,\n\t\t\t\tonSplit,\n\t\t\t\tonSplitMiddle,\n\t\t\t\t__unstableEmbedURLOnPaste,\n\t\t\t\tmultilineTag,\n\t\t\t\tpreserveWhiteSpace,\n\t\t\t\tpastePlainText,\n\t\t\t} = propsRef.current;\n\n\t\t\tif ( ! isSelected ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { clipboardData } = event;\n\n\t\t\tlet plainText = '';\n\t\t\tlet html = '';\n\n\t\t\t// IE11 only supports `Text` as an argument for `getData` and will\n\t\t\t// otherwise throw an invalid argument error, so we try the standard\n\t\t\t// arguments first, then fallback to `Text` if they fail.\n\t\t\ttry {\n\t\t\t\tplainText = clipboardData.getData( 'text/plain' );\n\t\t\t\thtml = clipboardData.getData( 'text/html' );\n\t\t\t} catch ( error1 ) {\n\t\t\t\ttry {\n\t\t\t\t\thtml = clipboardData.getData( 'Text' );\n\t\t\t\t} catch ( error2 ) {\n\t\t\t\t\t// Some browsers like UC Browser paste plain text by default and\n\t\t\t\t\t// don't support clipboardData at all, so allow default\n\t\t\t\t\t// behaviour.\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove Windows-specific metadata appended within copied HTML text.\n\t\t\thtml = removeWindowsFragments( html );\n\n\t\t\t// Strip meta tag.\n\t\t\thtml = removeCharsetMetaTag( html );\n\n\t\t\tevent.preventDefault();\n\n\t\t\t// Allows us to ask for this information when we get a report.\n\t\t\twindow.console.log( 'Received HTML:\\n\\n', html );\n\t\t\twindow.console.log( 'Received plain text:\\n\\n', plainText );\n\n\t\t\tif ( disableFormats ) {\n\t\t\t\tonChange( insert( value, plainText ) );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst transformed = formatTypes.reduce(\n\t\t\t\t( accumlator, { __unstablePasteRule } ) => {\n\t\t\t\t\t// Only allow one transform.\n\t\t\t\t\tif ( __unstablePasteRule && accumlator === value ) {\n\t\t\t\t\t\taccumlator = __unstablePasteRule( value, {\n\t\t\t\t\t\t\thtml,\n\t\t\t\t\t\t\tplainText,\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn accumlator;\n\t\t\t\t},\n\t\t\t\tvalue\n\t\t\t);\n\n\t\t\tif ( transformed !== value ) {\n\t\t\t\tonChange( transformed );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst files = [ ...getFilesFromDataTransfer( clipboardData ) ];\n\n\t\t\tif ( pastePlainText ) {\n\t\t\t\tonChange( insert( value, create( { text: plainText } ) ) );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( files?.length ) {\n\t\t\t\t// Allows us to ask for this information when we get a report.\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\twindow.console.log( 'Received items:\\n\\n', files );\n\t\t\t}\n\n\t\t\t// Process any attached files, unless we infer that the files in\n\t\t\t// question are redundant \"screenshots\" of the actual HTML payload,\n\t\t\t// as created by certain office-type programs.\n\t\t\t//\n\t\t\t// @see shouldDismissPastedFiles\n\t\t\tif (\n\t\t\t\tfiles?.length &&\n\t\t\t\t! shouldDismissPastedFiles( files, html, plainText )\n\t\t\t) {\n\t\t\t\tconst fromTransforms = getBlockTransforms( 'from' );\n\t\t\t\tconst blocks = files\n\t\t\t\t\t.reduce( ( accumulator, file ) => {\n\t\t\t\t\t\tconst transformation = findTransform(\n\t\t\t\t\t\t\tfromTransforms,\n\t\t\t\t\t\t\t( transform ) =>\n\t\t\t\t\t\t\t\ttransform.type === 'files' &&\n\t\t\t\t\t\t\t\ttransform.isMatch( [ file ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif ( transformation ) {\n\t\t\t\t\t\t\taccumulator.push(\n\t\t\t\t\t\t\t\ttransformation.transform( [ file ] )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn accumulator;\n\t\t\t\t\t}, [] )\n\t\t\t\t\t.flat();\n\t\t\t\tif ( ! blocks.length ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( onReplace && isEmpty( value ) ) {\n\t\t\t\t\tonReplace( blocks );\n\t\t\t\t} else {\n\t\t\t\t\tsplitValue( {\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tpastedBlocks: blocks,\n\t\t\t\t\t\tonReplace,\n\t\t\t\t\t\tonSplit,\n\t\t\t\t\t\tonSplitMiddle,\n\t\t\t\t\t\tmultilineTag,\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet mode = onReplace && onSplit ? 'AUTO' : 'INLINE';\n\n\t\t\t// Force the blocks mode when the user is pasting\n\t\t\t// on a new line & the content resembles a shortcode.\n\t\t\t// Otherwise it's going to be detected as inline\n\t\t\t// and the shortcode won't be replaced.\n\t\t\tif (\n\t\t\t\tmode === 'AUTO' &&\n\t\t\t\tisEmpty( value ) &&\n\t\t\t\tisShortcode( plainText )\n\t\t\t) {\n\t\t\t\tmode = 'BLOCKS';\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t__unstableEmbedURLOnPaste &&\n\t\t\t\tisEmpty( value ) &&\n\t\t\t\tisURL( plainText.trim() )\n\t\t\t) {\n\t\t\t\tmode = 'BLOCKS';\n\t\t\t}\n\n\t\t\tconst content = pasteHandler( {\n\t\t\t\tHTML: html,\n\t\t\t\tplainText,\n\t\t\t\tmode,\n\t\t\t\ttagName,\n\t\t\t\tpreserveWhiteSpace,\n\t\t\t\t// If the data comes from a rich text instance, we can directly\n\t\t\t\t// use it without filtering the data. The filters are only meant\n\t\t\t\t// for externally pasted content and remove inline styles.\n\t\t\t\tdisableFilters: !! clipboardData.getData( 'rich-text' ),\n\t\t\t} );\n\n\t\t\tif ( typeof content === 'string' ) {\n\t\t\t\tlet valueToInsert = create( { html: content } );\n\n\t\t\t\t// If the content should be multiline, we should process text\n\t\t\t\t// separated by a line break as separate lines.\n\t\t\t\tvalueToInsert = adjustLines( valueToInsert, !! multilineTag );\n\n\t\t\t\taddActiveFormats( valueToInsert, value.activeFormats );\n\t\t\t\tonChange( insert( value, valueToInsert ) );\n\t\t\t} else if ( content.length > 0 ) {\n\t\t\t\tif ( onReplace && isEmpty( value ) ) {\n\t\t\t\t\tonReplace( content, content.length - 1, -1 );\n\t\t\t\t} else {\n\t\t\t\t\tsplitValue( {\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tpastedBlocks: content,\n\t\t\t\t\t\tonReplace,\n\t\t\t\t\t\tonSplit,\n\t\t\t\t\t\tonSplitMiddle,\n\t\t\t\t\t\tmultilineTag,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\telement.addEventListener( 'paste', _onPaste );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'paste', _onPaste );\n\t\t};\n\t}, [] );\n}\n\n/**\n * Normalizes a given string of HTML to remove the Windows-specific \"Fragment\"\n * comments and any preceding and trailing content.\n *\n * @param {string} html the html to be normalized\n * @return {string} the normalized html\n */\nfunction removeWindowsFragments( html ) {\n\tconst startStr = '<!--StartFragment-->';\n\tconst startIdx = html.indexOf( startStr );\n\tif ( startIdx > -1 ) {\n\t\thtml = html.substring( startIdx + startStr.length );\n\t} else {\n\t\t// No point looking for EndFragment\n\t\treturn html;\n\t}\n\n\tconst endStr = '<!--EndFragment-->';\n\tconst endIdx = html.indexOf( endStr );\n\tif ( endIdx > -1 ) {\n\t\thtml = html.substring( 0, endIdx );\n\t}\n\n\treturn html;\n}\n\n/**\n * Removes the charset meta tag inserted by Chromium.\n * See:\n * - https://github.com/WordPress/gutenberg/issues/33585\n * - https://bugs.chromium.org/p/chromium/issues/detail?id=1264616#c4\n *\n * @param {string} html the html to be stripped of the meta tag.\n * @return {string} the cleaned html\n */\nfunction removeCharsetMetaTag( html ) {\n\tconst metaTag = `<meta charset='utf-8'>`;\n\n\tif ( html.startsWith( metaTag ) ) {\n\t\treturn html.slice( metaTag.length );\n\t}\n\n\treturn html;\n}\n"],"mappings":"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"}