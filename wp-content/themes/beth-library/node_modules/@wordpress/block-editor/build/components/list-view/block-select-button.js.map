{"version":3,"names":["_element","require","_classnames","_interopRequireDefault","_components","_icons","_keycodes","_data","_keyboardShortcuts","_i18n","_blockIcon","_useBlockDisplayInformation","_useBlockDisplayTitle","_expander","_blockLock","_store","_useListViewImages","ListViewBlockSelectButton","className","block","clientId","onClick","onToggleExpanded","tabIndex","onFocus","onDragStart","onDragEnd","draggable","isExpanded","ariaLabel","ariaDescribedBy","updateFocusAndSelection","ref","blockInformation","useBlockDisplayInformation","blockTitle","useBlockDisplayTitle","context","isLocked","useBlockLock","getSelectedBlockClientIds","getPreviousBlockClientId","getBlockRootClientId","getBlockOrder","canRemoveBlocks","useSelect","blockEditorStore","removeBlocks","useDispatch","isMatch","useShortcutEventMatch","isSticky","positionType","images","useListViewImages","positionLabel","sprintf","__","onDragStartHandler","event","dataTransfer","clearData","onKeyDownHandler","keyCode","ENTER","SPACE","BACKSPACE","DELETE","_getPreviousBlockClie","selectedBlockClientIds","isDeletingSelectedBlocks","includes","firstBlockClientId","firstBlockRootClientId","blocksToDelete","blockToFocus","shouldUpdateSelection","length","createElement","Fragment","Button","classnames","onKeyDown","href","default","icon","showColors","__experimentalHStack","alignment","justify","spacing","__experimentalTruncate","ellipsizeMode","anchor","Tooltip","text","Icon","pinSmall","map","image","index","key","url","style","backgroundImage","zIndex","lock","_default","forwardRef","exports"],"sources":["@wordpress/block-editor/src/components/list-view/block-select-button.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\t__experimentalHStack as HStack,\n\t__experimentalTruncate as Truncate,\n\tTooltip,\n} from '@wordpress/components';\nimport { forwardRef } from '@wordpress/element';\nimport { Icon, lockSmall as lock, pinSmall } from '@wordpress/icons';\nimport { SPACE, ENTER, BACKSPACE, DELETE } from '@wordpress/keycodes';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __unstableUseShortcutEventMatch as useShortcutEventMatch } from '@wordpress/keyboard-shortcuts';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport useBlockDisplayTitle from '../block-title/use-block-display-title';\nimport ListViewExpander from './expander';\nimport { useBlockLock } from '../block-lock';\nimport { store as blockEditorStore } from '../../store';\nimport useListViewImages from './use-list-view-images';\n\nfunction ListViewBlockSelectButton(\n\t{\n\t\tclassName,\n\t\tblock: { clientId },\n\t\tonClick,\n\t\tonToggleExpanded,\n\t\ttabIndex,\n\t\tonFocus,\n\t\tonDragStart,\n\t\tonDragEnd,\n\t\tdraggable,\n\t\tisExpanded,\n\t\tariaLabel,\n\t\tariaDescribedBy,\n\t\tupdateFocusAndSelection,\n\t},\n\tref\n) {\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\tconst blockTitle = useBlockDisplayTitle( {\n\t\tclientId,\n\t\tcontext: 'list-view',\n\t} );\n\tconst { isLocked } = useBlockLock( clientId );\n\tconst {\n\t\tgetSelectedBlockClientIds,\n\t\tgetPreviousBlockClientId,\n\t\tgetBlockRootClientId,\n\t\tgetBlockOrder,\n\t\tcanRemoveBlocks,\n\t} = useSelect( blockEditorStore );\n\tconst { removeBlocks } = useDispatch( blockEditorStore );\n\tconst isMatch = useShortcutEventMatch();\n\tconst isSticky = blockInformation?.positionType === 'sticky';\n\tconst images = useListViewImages( { clientId, isExpanded } );\n\n\tconst positionLabel = blockInformation?.positionLabel\n\t\t? sprintf(\n\t\t\t\t// translators: 1: Position of selected block, e.g. \"Sticky\" or \"Fixed\".\n\t\t\t\t__( 'Position: %1$s' ),\n\t\t\t\tblockInformation.positionLabel\n\t\t  )\n\t\t: '';\n\n\t// The `href` attribute triggers the browser's native HTML drag operations.\n\t// When the link is dragged, the element's outerHTML is set in DataTransfer object as text/html.\n\t// We need to clear any HTML drag data to prevent `pasteHandler` from firing\n\t// inside the `useOnBlockDrop` hook.\n\tconst onDragStartHandler = ( event ) => {\n\t\tevent.dataTransfer.clearData();\n\t\tonDragStart?.( event );\n\t};\n\n\t/**\n\t * @param {KeyboardEvent} event\n\t */\n\tfunction onKeyDownHandler( event ) {\n\t\tif ( event.keyCode === ENTER || event.keyCode === SPACE ) {\n\t\t\tonClick( event );\n\t\t} else if (\n\t\t\tevent.keyCode === BACKSPACE ||\n\t\t\tevent.keyCode === DELETE ||\n\t\t\tisMatch( 'core/block-editor/remove', event )\n\t\t) {\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\t\tconst isDeletingSelectedBlocks =\n\t\t\t\tselectedBlockClientIds.includes( clientId );\n\t\t\tconst firstBlockClientId = isDeletingSelectedBlocks\n\t\t\t\t? selectedBlockClientIds[ 0 ]\n\t\t\t\t: clientId;\n\t\t\tconst firstBlockRootClientId =\n\t\t\t\tgetBlockRootClientId( firstBlockClientId );\n\n\t\t\tconst blocksToDelete = isDeletingSelectedBlocks\n\t\t\t\t? selectedBlockClientIds\n\t\t\t\t: [ clientId ];\n\n\t\t\t// Don't update the selection if the blocks cannot be deleted.\n\t\t\tif ( ! canRemoveBlocks( blocksToDelete, firstBlockRootClientId ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet blockToFocus =\n\t\t\t\tgetPreviousBlockClientId( firstBlockClientId ) ??\n\t\t\t\t// If the previous block is not found (when the first block is deleted),\n\t\t\t\t// fallback to focus the parent block.\n\t\t\t\tfirstBlockRootClientId;\n\n\t\t\tremoveBlocks( blocksToDelete, false );\n\n\t\t\t// Update the selection if the original selection has been removed.\n\t\t\tconst shouldUpdateSelection =\n\t\t\t\tselectedBlockClientIds.length > 0 &&\n\t\t\t\tgetSelectedBlockClientIds().length === 0;\n\n\t\t\t// If there's no previous block nor parent block, focus the first block.\n\t\t\tif ( ! blockToFocus ) {\n\t\t\t\tblockToFocus = getBlockOrder()[ 0 ];\n\t\t\t}\n\n\t\t\tupdateFocusAndSelection( blockToFocus, shouldUpdateSelection );\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'block-editor-list-view-block-select-button',\n\t\t\t\t\tclassName\n\t\t\t\t) }\n\t\t\t\tonClick={ onClick }\n\t\t\t\tonKeyDown={ onKeyDownHandler }\n\t\t\t\tref={ ref }\n\t\t\t\ttabIndex={ tabIndex }\n\t\t\t\tonFocus={ onFocus }\n\t\t\t\tonDragStart={ onDragStartHandler }\n\t\t\t\tonDragEnd={ onDragEnd }\n\t\t\t\tdraggable={ draggable }\n\t\t\t\thref={ `#block-${ clientId }` }\n\t\t\t\taria-label={ ariaLabel }\n\t\t\t\taria-describedby={ ariaDescribedBy }\n\t\t\t\taria-expanded={ isExpanded }\n\t\t\t>\n\t\t\t\t<ListViewExpander onClick={ onToggleExpanded } />\n\t\t\t\t<BlockIcon\n\t\t\t\t\ticon={ blockInformation?.icon }\n\t\t\t\t\tshowColors\n\t\t\t\t\tcontext=\"list-view\"\n\t\t\t\t/>\n\t\t\t\t<HStack\n\t\t\t\t\talignment=\"center\"\n\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__label-wrapper\"\n\t\t\t\t\tjustify=\"flex-start\"\n\t\t\t\t\tspacing={ 1 }\n\t\t\t\t>\n\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__title\">\n\t\t\t\t\t\t<Truncate ellipsizeMode=\"auto\">{ blockTitle }</Truncate>\n\t\t\t\t\t</span>\n\t\t\t\t\t{ blockInformation?.anchor && (\n\t\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__anchor-wrapper\">\n\t\t\t\t\t\t\t<Truncate\n\t\t\t\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__anchor\"\n\t\t\t\t\t\t\t\tellipsizeMode=\"auto\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ blockInformation.anchor }\n\t\t\t\t\t\t\t</Truncate>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) }\n\t\t\t\t\t{ positionLabel && isSticky && (\n\t\t\t\t\t\t<Tooltip text={ positionLabel }>\n\t\t\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__sticky\">\n\t\t\t\t\t\t\t\t<Icon icon={ pinSmall } />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t) }\n\t\t\t\t\t{ images.length ? (\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__images\"\n\t\t\t\t\t\t\taria-hidden\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ images.map( ( image, index ) => (\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__image\"\n\t\t\t\t\t\t\t\t\tkey={ `img-${ image.url }` }\n\t\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\t\tbackgroundImage: `url(${ image.url })`,\n\t\t\t\t\t\t\t\t\t\tzIndex: images.length - index, // Ensure the first image is on top, and subsequent images are behind.\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) : null }\n\t\t\t\t\t{ isLocked && (\n\t\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__lock\">\n\t\t\t\t\t\t\t<Icon icon={ lock } />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) }\n\t\t\t\t</HStack>\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n\nexport default forwardRef( ListViewBlockSelectButton );\n"],"mappings":"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"}